**Decision ID:** DR-2026-02-05-01  
**Status:** Accepted  
**Date:** 2026-02-05  
**Deciders:** David, Codex

#### Context
Recurring votes are pre-created, which caused "vote created" Discord notifications to fire immediately instead of when voting actually opens at `recurrence_start_at`. There was also no simple way to send a test message to validate a Discord integration.

#### Options Considered
- **Option A:** Keep notifications at creation time  
  Simpler, but mismatches when voting actually opens.
- **Option B:** Send a "vote opened" notification when `recurrence_start_at` is reached  
  Aligns messaging with the actual start of voting.
- **Option C:** Delay vote creation until the start time  
  Higher operational risk, more invasive change.

#### Decision
Adopt **Option B**. Keep pre-created votes, but send a "vote opened" notification when `recurrence_start_at` is reached. Add a test notification endpoint/UI for Discord integrations.

#### Rationale
This preserves the existing pre-creation model while aligning notifications with the actual opening of voting. It also gives administrators a straightforward way to verify Discord webhook setup.

#### Consequences
- **Behavior:** Recurring notifications fire at vote start time rather than creation time.
- **UX:** Users see a "Voting Open" message aligned with when the poll is usable.
- **Technical constraints:** Requires tracking notification state to avoid duplicate sends (`open_notified_at`).
- **Future flexibility:** Test notifications provide a stable way to validate integrations and can be extended to other platforms.

#### Scope
- [ ] Voting rules
- [x] UX / product behavior
- [ ] Security / abuse prevention
- [ ] Deployment / ops
- [x] Data model
- [x] Other: Integrations testing

#### Notes
Test notifications are sent via `POST /api/integrations/:id` and can simulate open/created/closed events.
