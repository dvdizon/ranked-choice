# Decision Record

**Decision ID:** DR-2026-02-13-01  
**Status:** Accepted  
**Date:** 2026-02-13  
**Deciders:** Project maintainers

## Context
Automatic tie runoff creation already exists, but only for integration-enabled votes processed by scheduler. Admins requested two additional controls:
1. Manually trigger a tie breaker runoff as vote admin or system admin.
2. Close and reopen votes from system admin, with reopen preserving existing ballots.
3. Open a vote admin page directly from the system admin list.

## Options Considered
- **Option A:** Keep tie-break runoff scheduler-only and integration-only.
- **Option B:** Add manual tie-break runoff action for both vote admin and system admin, while retaining automatic scheduler behavior.

## Decision
Adopt **Option B**.

- Add a reusable server-side tie-break trigger function that validates: vote exists, is closed, has ballots, and currently has a pure tie.
- Expose tie-break trigger actions through both vote-admin (`/api/votes/:voteId`) and system-admin (`/api/admin/votes/:voteId`) PATCH endpoints.
- Extend system-admin vote management to support close/reopen (without ballot reset) and direct navigation to each vote's admin panel.

## Rationale
- Gives admins immediate control when a tie needs resolution without waiting for scheduler conditions.
- Keeps behavior additive: automatic tie-runoff remains intact.
- Reopen behavior remains safe and predictable by preserving ballots already cast.

## Consequences
- **Behavior:** Tie-break runoffs can now be created manually by authorized admins.
- **UX:** System admin can navigate directly into vote-level admin and can reopen previously closed votes.
- **Data model:** No schema changes needed; existing runoff tracking fields continue to prevent duplicate runoffs.
- **Security:** Existing secret checks remain in place (write secret for vote admin, ADMIN_SECRET for system admin).

## Scope
- [ ] Voting rules
- [x] UX / product behavior
- [x] Security / abuse prevention
- [ ] Deployment / ops
- [ ] Data model
- [x] Other: admin workflow and controls

## Notes
Reopening a vote intentionally does **not** clear ballots; this preserves prior-round participation and avoids accidental data loss.
